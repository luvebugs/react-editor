!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Immutable"),require("React"),require("Draft"),require("ReactDOM")):"function"==typeof define&&define.amd?define(["Immutable","React","Draft","ReactDOM"],t):"object"==typeof exports?exports.DraftExtend=t(require("Immutable"),require("React"),require("Draft"),require("ReactDOM")):e.DraftExtend=t(e.Immutable,e.React,e.Draft,e.ReactDOM)}(this,function(e,t,n,r){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.compose=t.pluginUtils=t.createPlugin=t.KeyCommandController=t.Toolbar=t.Editor=void 0;var o=n(7),a=r(o),i=n(9),s=r(i),d=n(3),u=r(d),l=n(10),c=r(l),p=n(11),f=r(p),y=n(5),m=r(y);t.Editor=a.default,t.Toolbar=s.default,t.KeyCommandController=u.default,t.createPlugin=c.default,t.pluginUtils=f.default,t.compose=m.default},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(6),s=r(i),d=n(1),u=n(2),l=r(u),c=n(4),p={addKeyCommandListener:u.PropTypes.func,removeKeyCommandListener:u.PropTypes.func,handleKeyCommand:u.PropTypes.func},f=function(e){return l.default.createClass({displayName:"KeyCommandController("+e.displayName+")",propTypes:a({editorState:u.PropTypes.object,onChange:u.PropTypes.func,keyCommandListeners:u.PropTypes.arrayOf(u.PropTypes.func)},p),getDefaultProps:function(){return{keyCommandListeners:[]}},componentWillMount:function(){this.keyCommandOverrides=(0,d.List)(this.props.keyCommandListeners),this.keyCommandListeners=(0,d.List)()},componentDidMount:function(){var e=this,t=Object.keys(p),n=t.filter(function(t){return void 0!==e.props[t]}),r=0===n.length,o=n.length===t.length;(0,s.default)(r||o,"KeyCommandController: A KeyCommandController is receiving only some props ("+n.join(", ")+") necessary to defer to a parent key command controller."),o&&this.props.keyCommandListeners.forEach(function(t){e.props.addKeyCommandListener(t)})},componentWillUnmount:function(){var e=this;this.props.removeKeyCommandListener&&this.props.keyCommandListeners.forEach(function(t){e.props.removeKeyCommandListener(t)})},addKeyCommandListener:function e(t){var e=this.props.addKeyCommandListener;return e?void e(t):void(this.keyCommandListeners=this.keyCommandListeners.unshift(t))},removeKeyCommandListener:function e(t){var e=this.props.removeKeyCommandListener;return e?void e(t):void(this.keyCommandListeners=this.keyCommandListeners.filterNot(function(e){return e===t}))},handleKeyCommand:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.props,o=r.editorState,a=r.onChange,e=r.handleKeyCommand;if(e)return e(t,n);var i=this.keyCommandOverrides.concat(this.keyCommandListeners).reduce(function(e,r){var o=e.state,i=e.hasChanged;if(i===!0)return{state:o,hasChanged:i};var s=r(o,t,n),d=s instanceof c.EditorState;return s===!0||d&&s!==o?d?(a(s),{state:s,hasChanged:!0}):{state:o,hasChanged:!0}:{state:o,hasChanged:i}},{state:o,hasChanged:!1});return i.hasChanged},focus:function(){this.refs.editor.focus()},blur:function(){this.refs.editor.blur()},render:function(){var t=this.props,n=t.editorState,r=t.onChange,i=(t.keyCommandListeners,o(t,["editorState","onChange","keyCommandListeners"]));return l.default.createElement(e,a({},i,{ref:"editor",editorState:n,onChange:r,addKeyCommandListener:this.addKeyCommandListener,removeKeyCommandListener:this.removeKeyCommandListener,handleKeyCommand:this.handleKeyCommand}))}})};t.default=f},function(e,t){e.exports=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){if(0===t.length)return arguments.length<=0?void 0:arguments[0];var e=t[t.length-1],n=t.slice(0,-1);return n.reduceRight(function(e,t){return t(e)},e.apply(void 0,arguments))}}},function(e,t,n){"use strict";var r=function(e,t,n,r,o,a,i,s){if(!e){var d;if(void 0===t)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,o,a,i,s],l=0;d=new Error(t.replace(/%s/g,function(){return u[l++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}};e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(2),s=r(i),d=(n(1),n(4)),u=n(3),l=r(u),c=n(8),p=r(c),f={className:i.PropTypes.string,editorState:i.PropTypes.object,onChange:i.PropTypes.func,decorators:i.PropTypes.array,styleMap:i.PropTypes.object,buttons:i.PropTypes.array,overlays:i.PropTypes.array,blockRendererFn:i.PropTypes.func,blockStyleFn:i.PropTypes.func,keyBindingFn:i.PropTypes.func,addKeyCommandListener:i.PropTypes.func.isRequired,removeKeyCommandListener:i.PropTypes.func.isRequired,handleReturn:i.PropTypes.func,onEscape:i.PropTypes.func,onTab:i.PropTypes.func,onUpArrow:i.PropTypes.func,onDownArrow:i.PropTypes.func,readOnly:i.PropTypes.bool,showButtons:i.PropTypes.bool},y=s.default.createClass({displayName:"EditorWrapper",propTypes:f,childContextTypes:{getEditorState:i.PropTypes.func,getReadOnly:i.PropTypes.func,setReadOnly:i.PropTypes.func,onChange:i.PropTypes.func,focus:i.PropTypes.func,blur:i.PropTypes.func},getDefaultProps:function(){return{className:"",editorState:d.EditorState.createEmpty(),onChange:function(){},decorators:[],styleMap:{},buttons:[],overlays:[],blockRendererFn:function(){},blockStyleFn:function(){},keyBindingFn:function(){},readOnly:!1,showButtons:!0}},getInitialState:function(){var e=new d.CompositeDecorator(this.props.decorators);return{decorator:e,readOnly:!1}},getChildContext:function(){return{getEditorState:this.getDecoratedState,getReadOnly:this.getReadOnly,setReadOnly:this.setReadOnly,onChange:this.props.onChange,focus:this.focus,blur:this.blur}},componentWillReceiveProps:function(e){if(e.decorators.length===this.state.decorator._decorators.length){var t=this.state.decorator._decorators.every(function(t,n){return t===e.decorators[n]});if(t)return}this.setState({decorator:new d.CompositeDecorator(e.decorators)})},keyBindingFn:function(e){var t=this.props.keyBindingFn(e);return t?t:(0,d.getDefaultKeyBinding)(e)},handleReturn:function(e){return this.props.handleReturn&&this.props.handleReturn(e)||this.props.handleKeyCommand("return",e)},onEscape:function(e){return this.props.onEscape&&this.props.onEscape(e)||this.props.handleKeyCommand("escape",e)},onTab:function(e){return this.props.onTab&&this.props.onTab(e)||this.props.handleKeyCommand("tab",e)},onUpArrow:function(e){return this.props.onUpArrow&&this.props.onUpArrow(e)||this.props.handleKeyCommand("up-arrow",e)},onDownArrow:function(e){return this.props.onDownArrow&&this.props.onDownArrow(e)||this.props.handleKeyCommand("down-arrow",e)},focus:function(){this.refs.editor.focus()},blur:function(){this.refs.editor.blur()},getOtherProps:function(){var e=this,t=Object.keys(this.props),n=Object.keys(f),r=t.filter(function(e){return n.indexOf(e)===-1});return r.reduce(function(t,n){return t[n]=e.props[n],t},{})},getReadOnly:function(){return this.state.readOnly||this.props.readOnly},setReadOnly:function(e){this.setState({readOnly:e})},getDecoratedState:function(){var e=this.props.editorState,t=this.state.decorator,n=e.getDecorator();return n&&n._decorators===t._decorators?e:d.EditorState.set(e,{decorator:t})},renderPluginButtons:function(){var e=this,t=this.props,n=t.onChange,r=t.addKeyCommandListener,o=t.removeKeyCommandListener,i=t.showButtons;if(i===!1)return null;var d=this.getDecoratedState();return this.props.buttons.map(function(t,i){return s.default.createElement(t,a({},e.getOtherProps(),{key:"button-"+i,attachedToEditor:!0,editorState:d,onChange:n,addKeyCommandListener:r,removeKeyCommandListener:o}))})},renderOverlays:function(){var e=this,t=this.props,n=t.onChange,r=t.addKeyCommandListener,o=t.removeKeyCommandListener,i=this.getDecoratedState();return this.props.overlays.map(function(t,d){return s.default.createElement(p.default,{key:d},s.default.createElement(t,a({},e.getOtherProps(),{editorState:i,onChange:n,addKeyCommandListener:r,removeKeyCommandListener:o})))})},render:function(){var e=this.props,t=e.styleMap,n=e.blockRendererFn,r=e.blockStyleFn,i=e.onChange,u=e.handleKeyCommand,l=o(e,["styleMap","blockRendererFn","blockStyleFn","onChange","handleKeyCommand"]),c=this.getDecoratedState(),p="draft-extend "+this.props.className,f=this.getReadOnly();return s.default.createElement("div",{className:p},s.default.createElement("div",{className:"draft-extend-editor"},s.default.createElement(d.Editor,a({},l,{ref:"editor",editorState:c,readOnly:f,onChange:i,blockStyleFn:r,blockRendererFn:n,customStyleMap:t,handleKeyCommand:u,keyBindingFn:this.keyBindingFn,handleReturn:this.handleReturn,onEscape:this.onEscape,onTab:this.onTab,onUpArrow:this.onUpArrow,onDownArrow:this.onDownArrow})),s.default.createElement("div",{className:"draft-extend-controls"},this.renderPluginButtons()),s.default.createElement("div",{className:"draft-extend-overlays"},this.renderOverlays())))}});t.default=(0,l.default)(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=r(o),i=n(15),s=r(i);t.default=a.default.createClass({displayName:"OverlayWrapper",getInitialState:function(){var e=document.createElement("div");return document.body.appendChild(e),{node:e}},componentDidMount:function(){this.renderOverlay()},componentDidUpdate:function(){this.renderOverlay()},componentWillUnmount:function(){s.default.unmountComponentAtNode(this.state.node)},renderOverlay:function(){var e=a.default.Children.only(this.props.children);s.default.render(e,this.state.node)},render:function(){return null}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(2),s=r(i),d=n(3),u=r(d),l=s.default.createClass({displayName:"Toolbar",propTypes:{editorState:i.PropTypes.object,onChange:i.PropTypes.func,buttons:i.PropTypes.array,addKeyCommandListener:i.PropTypes.func.isRequired,removeKeyCommandListener:i.PropTypes.func.isRequired},childContextTypes:{getEditorState:i.PropTypes.func,onChange:i.PropTypes.func},getChildContext:function(){return{getEditorState:this.getEditorState,onChange:this.props.onChange}},getEditorState:function(){return this.props.editorState},renderButtons:function(){var e=this.props,t=e.editorState,n=e.onChange,r=e.buttons,i=e.addKeyCommandListener,d=e.removeKeyCommandListener,u=o(e,["editorState","onChange","buttons","addKeyCommandListener","removeKeyCommandListener"]);return r.map(function(e,r){return s.default.createElement(e,a({},u,{key:"button-"+r,editorState:t,onChange:n,addKeyCommandListener:i,removeKeyCommandListener:d}))})},render:function(){return s.default.createElement("ul",{className:"draft-extend-controls"},this.renderButtons())}});t.default=(0,u.default)(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(2),i=r(a),s=n(1),d=n(13),u=r(d),l=n(5),c=r(l),p=n(12),f=r(p),y=n(14),m=r(y),h=function(){},v=[],g={},C=function(e){return function(){return e.apply(void 0,arguments)}};C.__isMiddleware=!0;var b=(0,u.default)(c.default),T=(0,u.default)(f.default),O=(0,u.default)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.assign.apply(Object,[{}].concat(t))}),k=(0,u.default)(function(e,t){return e.concat(t)}),P=(0,u.default)(function(e){return Array.isArray(e)?e:[e]}),S=(0,u.default)(function(e){return function(t,n){return e(t,n,(0,s.OrderedSet)())}}),L=(0,u.default)(m.default),M=function e(t){var n=t.displayName,r=void 0===n?"Plugin":n,s=t.decorators,d=void 0===s?v:s,u=t.buttons,l=void 0===u?v:u,c=t.overlays,p=void 0===c?v:c,f=t.styleMap,y=void 0===f?g:f,m=t.blockRendererFn,M=void 0===m?h:m,E=t.blockStyleFn,K=void 0===E?h:E,_=t.keyBindingFn,w=void 0===_?h:_,R=t.keyCommandListener,j=void 0===R?h:R,x=t.htmlToStyle,B=void 0===x?C:x,F=t.htmlToBlock,A=void 0===F?C:F,D=t.htmlToEntity,N=void 0===D?C:D,q=t.textToEntity,H=void 0===q?C:q,U=t.styleToHTML,I=void 0===U?C:U,W=t.blockToHTML,z=void 0===W?C:W,V=t.entityToHTML,Z=void 0===V?C:V;return function(t){return d=P(d),l=P(l),p=P(p),t.prototype&&t.prototype.isReactComponent?i.default.createClass({displayName:r,propTypes:{styleMap:a.PropTypes.object,decorators:a.PropTypes.array,buttons:a.PropTypes.array,overlays:a.PropTypes.array,blockRendererFn:a.PropTypes.func,blockStyleFn:a.PropTypes.func,keyBindingFn:a.PropTypes.func,keyCommandListeners:a.PropTypes.arrayOf(a.PropTypes.func)},getDefaultProps:function(){return{styleMap:g,decorators:v,buttons:v,overlays:v,blockRendererFn:h,blockStyleFn:h,keyBindingFn:h,keyCommandListeners:v}},focus:function(){this.refs.child.focus&&this.refs.child.focus()},blur:function(){this.refs.child.blur&&this.refs.child.blur()},render:function(){var e=O(this.props.styleMap,y),n=k(this.props.decorators,d),r=k(this.props.buttons,l),a=k(this.props.overlays,p),s=T(M,this.props.blockRendererFn),u=T(K,this.props.blockStyleFn),c=T(w,this.props.keyBindingFn),f=k(this.props.keyCommandListeners,P(j));return i.default.createElement(t,o({},this.props,{ref:"child",styleMap:e,decorators:n,buttons:r,overlays:a,blockRendererFn:s,blockStyleFn:u,keyBindingFn:c,keyCommandListeners:f}))}}):function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];if(1===r.length&&("string"==typeof r[0]||r[0].hasOwnProperty("_map")&&null!=r[0].getBlockMap))return t({htmlToStyle:B,htmlToBlock:A,htmlToEntity:N,textToEntity:H,styleToHTML:I,blockToHTML:z,entityToHTML:Z}).apply(void 0,r);var a=r[0],i=b(L(S(B)),L(a.htmlToStyle));i.__isMiddleware=!0;var s=b(L(A),L(a.htmlToBlock));s.__isMiddleware=!0;var d=b(L(N),L(a.htmlToEntity));d.__isMiddleware=!0;var u=b(L(H),L(a.textToEntity));u.__isMiddleware=!0;var l=b(L(I),L(a.styleToHTML));l.__isMiddleware=!0;var c=b(L(z),L(a.blockToHTML));c.__isMiddleware=!0;var p=b(L(Z),L(a.entityToHTML));return p.__isMiddleware=!0,e({htmlToStyle:i,htmlToBlock:s,htmlToEntity:d,textToEntity:u,styleToHTML:l,blockToHTML:c,entityToHTML:p})(t)}}};t.default=M},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=n(1),i=n(6),s=r(i),d=function(e){return e.replace(/[a-z][A-Z]/g,function(e){return e[0]+"-"+e[1].toLowerCase()})},u=function(e){var t=e.getCurrentContent().getBlockForKey(e.getSelection().getStartKey());if(t)return t.getEntityAt(e.getSelection().getStartOffset())};t.default={camelCaseToHyphen:d,styleObjectToString:function(e){return Object.keys(e).map(function(t){return d(t)+": "+e[t]+";"}).join(" ").replace(/"/g,'\\"')},entityStrategy:function(e){return function(t,n){t.findEntityRanges(function(t){var n=t.getEntity();return null!==n&&o.Entity.get(n).getType()===e},n)}},getEntitySelection:function(e,t){var n=[];return e.getCurrentContent().getBlocksAsArray().forEach(function(e){e.findEntityRanges(function(e){return e.getEntity()===t},function(t,r){n.push(o.SelectionState.createEmpty(e.getKey()).merge({anchorOffset:t,focusOffset:r,isBackward:!1,hasFocus:!0}))})}),(0,s.default)(1===n.length,"getEntitySelection: More than one range with the same entityKey. Please use unique entity instances"),n[0]},insertBlockAtCursor:function(e,t){var n=e.getCurrentContent(),r=e.getSelection(),i=o.Modifier.removeRange(n,r,"backward"),s=i.getSelectionAfter(),d=o.Modifier.splitBlock(i,s),u=d.getSelectionAfter(),l=o.Modifier.setBlockType(d,u,t.getType()),c=[t,new o.ContentBlock({key:(0,o.genKey)(),type:"unstyled",text:"",characterList:(0,a.List)()})],p=o.BlockMapBuilder.createFromArray(c),f=o.Modifier.replaceWithFragment(l,u,p),y=f.merge({selectionBefore:r,selectionAfter:f.getSelectionAfter().set("hasFocus",!0)});return o.EditorState.push(e,y,"insert-fragment")},getSelectedInlineStyles:function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=n.getBlockMap().skipUntil(function(e,n){return n===t.getStartKey()}).takeUntil(function(e,r){return n.getKeyBefore(r)===t.getEndKey()});return r.reduce(function(e,n){var r=n.getKey(),o=0,a=n.getLength()-1;r===t.getStartKey()&&(o=t.getStartOffset()),r===t.getEndKey()&&(a=t.getEndOffset());for(var i=o;i<=a;i++)e=e.union(n.getInlineStyleAt(i));return e},(0,a.Set)())},matchAll:function(e,t){for(var n=[],r=t.exec(e);null!==r;)n.push(r.concat([r.index])),r=t.exec(e);return n},getActiveEntity:u,isEntityActive:function(e,t){var n=u(e);if(n){var r=o.Entity.get(n);return r&&r.type===t}return!1}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(){var n=e.apply(void 0,arguments);return null===n||void 0===n?t.apply(void 0,arguments):n}}},function(e,t,n){"use strict";function r(e){var t=(0,o.Map)();return function(){var n=o.List.of.apply(o.List,arguments);return t.has(n)||(t=t.set(n,e.apply(void 0,arguments))),t.get(n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1),a=function(e){return e&&e.__isMiddleware?e:function(t){return function(){if("object"===("undefined"==typeof e?"undefined":r(e))){var n=arguments.length<=0?void 0:arguments[0],a=void 0;if("string"==typeof n){var i=n;a=e[i]}else a=e[n.type];return null!==a&&void 0!==a?a:t.apply(void 0,arguments)}var s=void 0;try{var d=e.apply(void 0,arguments);if(null===d||void 0===d)s=t.apply(void 0,arguments);else if(2===arguments.length&&"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(arguments.length<=1?void 0:arguments[1])===d)s=t.apply(void 0,arguments);else if(Array.isArray(d))s=d.concat(t.apply(void 0,arguments));else if(o.OrderedSet.isOrderedSet(d)){var u,l=(u=arguments.length-1,arguments.length<=u?void 0:arguments[u]);s=l.union(d).union(t.apply(void 0,arguments))}else s="function"==typeof d?e(t).apply(void 0,arguments):d}catch(n){s=e(t).apply(void 0,arguments)}finally{return s}}}};t.default=a},function(e,t){e.exports=r}])});