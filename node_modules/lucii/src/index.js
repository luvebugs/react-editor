import {existsSync, readFileSync, realpathSync, watch} from 'fs';
import {join, resolve} from 'path';
import {fork, spawn} from 'child_process';
import getConfig from './util/config';
import getPkg from './util/pkg';
import getPath from './util/path';
import applyMock from './mock';

function getMock(config) {
    return applyMock({db: config.db, port: config.port, host: config.host});
}

function test() {
    getMock();
}

export default (scripts, argv) => {
    const config = {...getConfig(), root: getPath(process.cwd())()}
    const pkg = getPkg();
    
    const workers = scripts.map(script => {
        return require(`../lib/${script}`)({config, pkg})(argv);
    });
    const result = spawn('node', workers.concat(argv));
}