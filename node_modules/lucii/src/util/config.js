import {existsSync, readFileSync, realpathSync} from 'fs';
import {join, resolve, parse} from 'path';
import stripJsonComments from 'strip-json-comments';

export default () => {
    let config = JSON.parse(stripJsonComments(readFileSync('.lucii', 'utf-8')));
    const {html} = config;
    return {
        publicPath: '/',
        outputPath: './dist',
        host: 'localhost',
        port: 8352,
        ...config,
        html: {
            title: html.title,
            favicon: html.favicon,
            template: html.template,
            filename: html.filename || parse(html.template).base
        }
    };
};