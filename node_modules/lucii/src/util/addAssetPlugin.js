

export default (options) => {
    const {config} = options;
    function apply(compiler) {
        compiler.plugin('compilation', function (compilation) {
            compilation.plugin('html-webpack-plugin-before-html-processing', function (htmlPluginData, callback) {
                const filename = require(`${config.root}/manifest.json`).name
                htmlPluginData.assets.js.unshift(`${htmlPluginData.assets.publicPath}dist/${filename}.js`);
                callback(null, htmlPluginData);
            });
        });
    }
    return {
        apply
    }
};