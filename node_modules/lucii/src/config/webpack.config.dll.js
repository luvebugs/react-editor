import path from 'path';
import webpack from 'webpack';
import HtmlWebpackPlugin from 'html-webpack-plugin';
import getPath from '../util/path';

export default function (config, pkg) {
  const dependencies = Object.keys(pkg.dependencies);
  const vendors = config.commons || dependencies;
  console.log(vendors);
  return {
    entry: {
      vendor: vendors
    },
    output: {
      path: path.resolve(config.outputPath),
      filename: '[name].js',
      library: '[name]'
    },
    plugins: [
      new webpack.DllPlugin({path: 'manifest.json', name: '[name]', context: config.root})
    ]
  }
};