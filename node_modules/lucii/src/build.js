import webpack from 'webpack';
import { resolve } from 'path';
import applyWebpackConfig from './config/webpack.config.prop'

function done(err, stats) {
    console.log(stats.toString({
        colors: true
    }));
}

export default (option) => {
    const {config, pkg} = option;
    process.env.NODE_ENV = process.env.NODE_ENV || 'production';
    const webpackConfig = applyWebpackConfig(config, pkg);
    function build(avgs) {
        const compiler = webpack(webpackConfig);
        compiler.run(done);
    }
    return build;
}
