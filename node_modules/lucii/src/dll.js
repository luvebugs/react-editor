import webpack from 'webpack';
import applyWebpackConfig from './config/webpack.config.dll'

function done(err, stats) {
    console.log(stats.toString({
        // ... Add console colors
        colors: true
    }));
}

export default (option) => {
    const {config, pkg, getPath} = option;
    function buildDll(avgs) {
        const compiler = webpack(applyWebpackConfig(config, pkg, getPath));
        compiler.plugin('done', (stats) => {
            // console.log(stats);
        })
        compiler.run(done);
    }
    return buildDll;
}
